"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[9885],{75574:(e,s,r)=>{r.d(s,{Ay:()=>d,RM:()=>t});var n=r(62540),i=r(43023);const t=[];function o(e){const s={code:"code",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.p,{children:"Provision services."}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-shell",children:"teamforge provision\n"})})]})}function d(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}},32089:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>c,contentTitle:()=>d,default:()=>p,frontMatter:()=>o,metadata:()=>a,toc:()=>l});var n=r(62540),i=r(43023),t=r(75574);const o={description:"Use the teamforge.py script to deploy and undeploy services, start and stop services, verify the status of services, verify the application environment, bootstrap or migrate data, back up and restore data and do much more.",id:"teamforgescript",keywords:["teamforge","script","provision","deploy","undeploy","components","services","backup","restore","back up","start","stop","restart","snapshot","bootstrap","initialize"],lastUpdatedAt:"Apr 23, 2019",product:"teamforge",tags:["ctf_20.1","ctf_19.0","ctf_18.3","installation","upgrade","scripts","backup_restore","site-options.conf"],title:"The teamforge.py Script"},d=void 0,a={id:"scripts/teamforgescript",title:"The teamforge.py Script",description:"Use the teamforge.py script to deploy and undeploy services, start and stop services, verify the status of services, verify the application environment, bootstrap or migrate data, back up and restore data and do much more.",source:"@site/versioned_docs/version-23.1/scripts/teamforgescript.md",sourceDirName:"scripts",slug:"/scripts/teamforgescript",permalink:"/teamforge/docs/scripts/teamforgescript",draft:!1,unlisted:!1,tags:[{inline:!0,label:"ctf_20.1",permalink:"/teamforge/docs/tags/ctf-20-1"},{inline:!0,label:"ctf_19.0",permalink:"/teamforge/docs/tags/ctf-19-0"},{inline:!0,label:"ctf_18.3",permalink:"/teamforge/docs/tags/ctf-18-3"},{inline:!0,label:"installation",permalink:"/teamforge/docs/tags/installation"},{inline:!0,label:"upgrade",permalink:"/teamforge/docs/tags/upgrade"},{inline:!0,label:"scripts",permalink:"/teamforge/docs/tags/scripts"},{inline:!0,label:"backup_restore",permalink:"/teamforge/docs/tags/backup-restore"},{inline:!0,label:"site-options.conf",permalink:"/teamforge/docs/tags/site-options-conf"}],version:"23.1",lastUpdatedAt:1721042912e3,frontMatter:{description:"Use the teamforge.py script to deploy and undeploy services, start and stop services, verify the status of services, verify the application environment, bootstrap or migrate data, back up and restore data and do much more.",id:"teamforgescript",keywords:["teamforge","script","provision","deploy","undeploy","components","services","backup","restore","back up","start","stop","restart","snapshot","bootstrap","initialize"],lastUpdatedAt:"Apr 23, 2019",product:"teamforge",tags:["ctf_20.1","ctf_19.0","ctf_18.3","installation","upgrade","scripts","backup_restore","site-options.conf"],title:"The teamforge.py Script"},sidebar:"docs",previous:{title:"task-data-export.py",permalink:"/teamforge/docs/scripts/task-data-export-py"},next:{title:"pdate_artifact_textflex_carriage_return.py",permalink:"/teamforge/docs/scripts/update_artifact_textflex_carriage_return_py"}},c={},l=[{value:"Overview",id:"overview",level:2},{value:"TeamForge components and services",id:"teamforge-components-and-services",level:2},{value:"Components",id:"components",level:3},{value:"Services",id:"services",level:3},{value:"Service Life Cycle",id:"service-life-cycle",level:3},{value:"Parameters",id:"parameters",level:2},{value:"Commands",id:"commands",level:2},{value:"teamforge reload",id:"reload",level:3},{value:"Back up and Restore TeamForge Data Using the teamforge.py Script",id:"teamforgebackup",level:2},{value:"Back up and Restore TeamForge",id:"back-up-and-restore-teamforge",level:3},...t.RM,{value:"Back up and Restore a Specific Service",id:"back-up-and-restore-a-specific-service",level:3},...t.RM,{value:"Did You Back up symlinked Directories?",id:"did-you-back-up-symlinked-directories",level:3},{value:"Logging",id:"logging",level:2}];function h(e){const s={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.h2,{id:"overview",children:"Overview"}),"\n",(0,n.jsxs)(s.p,{children:["Use the ",(0,n.jsx)(s.code,{children:"teamforge"})," script wherever applicable as it subsumes the functions of the following legacy TeamForge scripts:"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"bootstrap-data.sh"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"bootstrap-data.py"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"bootstrap-reporting-data.sh"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"bootstrap-reporting-data.py"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"create-runtime.py"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"collabnet"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"migrate.py"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"post-install.py"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"snapshot.py"})}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.img,{src:r(75905).A+"",width:"22",height:"22"})," Starting from TeamForge 17.8, ",(0,n.jsx)(s.code,{children:"/opt/collabnet/teamforge/bin/teamforge"})," has been linked to ",(0,n.jsx)(s.code,{children:"/usr/bin"}),". You can simply run the ",(0,n.jsx)(s.code,{children:"teamforge"})," command from any path."]}),"\n",(0,n.jsxs)(s.p,{children:["Run the ",(0,n.jsx)(s.code,{children:"teamforge"})," script with the following syntax:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-shell",children:"teamforge [command] [-s serviceName] [other parameters]\n"})}),"\n",(0,n.jsx)(s.p,{children:"For example, the following command displays the status of all the services:"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-shell",children:"teamforge status\n"})}),"\n",(0,n.jsx)(s.h2,{id:"teamforge-components-and-services",children:"TeamForge components and services"}),"\n",(0,n.jsx)(s.h3,{id:"components",children:"Components"}),"\n",(0,n.jsx)(s.p,{children:"TeamForge comprises of a set of components such as ctfcore, subversion, james, and so on. Some components are always required to be installed, while some are optional. By delivering these components over multiple RPMs, we make sure that users do not have to install everything all the time. Though this is valuable, RPMs alone prove insufficient to manage the components and their inter-dependencies."}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Some components do not have a physical representation but are configuration-only."}),"\n",(0,n.jsx)(s.li,{children:"RPM dependencies are restricted to the local machine only; however, in a distributed installation, dependencies between components must be tracked across servers."}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"In addition to the physical componentization (using RPMs), there is also a need for a logical componentization of TeamForge."}),"\n",(0,n.jsx)(s.h3,{id:"services",children:"Services"}),"\n",(0,n.jsx)(s.p,{children:"Services represent a logical component of TeamForge. Such a logical component may either be a feature, which the user explicitly opts to install (for example, Review Board) or a technical component (for example, Apache and Logrotate), which other services depend on. Services come with additional metadata, which makes it possible to track and manage dependencies to a more fine-grained level."}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Deployment dependencies specify which other services need to be deployed locally."}),"\n",(0,n.jsx)(s.li,{children:"Provided Endpoints specify which network endpoints the service offers."}),"\n",(0,n.jsx)(s.li,{children:"Required Endpoints specify which network endpoints the service depends on."}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"In general, services are more fine-grained than RPMs and it is common to have a single RPM containing multiple services."}),"\n",(0,n.jsx)(s.h3,{id:"service-life-cycle",children:"Service Life Cycle"}),"\n",(0,n.jsx)(s.p,{children:"A service can be in one of the following states:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"Uninstalled"}),": A service is uninstalled if the RPM that contains it is not installed. Uninstalled services do not exist as far as TeamForge is concerned."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"Undeployed"}),': The RPM containing the service is installed, but the service has not been deployed yet. Deployment is also referred to as "creating the runtime", but is specific to one service.']}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"Dependencies unavailable"}),': The service itself might be available, but at least one of its deployment dependencies is not in "Available" state.']}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"Available"}),": Service is fully functional."]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"Services that manage data have the following additional states:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"Not bootstrapped"}),": Data structures have not been initialized yet."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"Not migrated"}),": Data structures are initialized, but data needs to be migrated."]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"Services that have a daemon have the following additional states:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"Dependencies unavailable"}),': The service itself might be available, but at least one of its deployment dependencies is not in "Available" state.']}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"Ports Blocked"}),": The service is impeded from starting up because at least one of the ports it needs is in use by a different process."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"Stopped"}),": Service is an auto start-type service, yet is stopped."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"Inactive"}),": Service is a demand start-type service and is stopped."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"Starting"}),": Service is in the process of starting up."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"Available"}),": Service is running and healthy according to its health check."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"Unhealthy"}),": Service is running but unhealthy according to its health check."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"Dead"}),": Service is supposed to be running, but the process disappeared."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"Doomed"}),": Service is technically running, but it will never work properly because some part of it failed to initialize properly."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"Stopping"}),": Service is in the process of stopping."]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"parameters",children:"Parameters"}),"\n",(0,n.jsx)(s.p,{children:"teamforge.py script accepts the following command line parameters:"}),"\n",(0,n.jsxs)("dl",{class:"dl",children:[(0,n.jsx)("dt",{class:"dt dlterm",children:(0,n.jsx)(s.p,{children:"[-s | --service]"})}),(0,n.jsxs)("dd",{class:"dd",markdown:"1",children:[(0,n.jsxs)(s.p,{children:["Use the ",(0,n.jsx)(s.em,{children:"-s"})," parameter to selectively act on a specific service or component such as selectively start, stop, bootstrap, backup and restore a specific service. For example, the following command gets you the status of Jboss:"]}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-shell",children:"teamforge status -s jboss\n"})})]}),(0,n.jsx)("dt",{class:"dt dlterm",children:(0,n.jsx)(s.p,{children:"[-f | --site_options_file]"})}),(0,n.jsx)("dd",{class:"dd",children:(0,n.jsxs)(s.p,{children:["Use the ",(0,n.jsx)("span",{class:"keyword parmname",children:"-f"})," parameter to pass the\r\n",(0,n.jsx)("span",{class:"ph filepath",children:"site-options.conf"})," file's path as a command line\r\nparameter (default is ",(0,n.jsx)("span",{class:"ph filepath",children:"/opt/collabnet/teamforge/etc/site-options.conf"}),")."]})}),(0,n.jsx)("dt",{class:"dt dlterm",children:(0,n.jsx)(s.p,{children:"[--skip-verification]"})}),(0,n.jsx)("dd",{class:"dd",children:(0,n.jsx)(s.p,{children:"Pass this parameter if you want to skip environment verification."})}),(0,n.jsx)("dt",{class:"dt dlterm",children:(0,n.jsx)(s.p,{children:"[-y | --yes]"})}),(0,n.jsx)("dd",{class:"dd",children:(0,n.jsx)(s.p,{children:"Pass this parameter if you want to skip confirmation prompts."})}),(0,n.jsx)("dt",{class:"dt dlterm",children:(0,n.jsx)(s.p,{children:"[-p | --path]"})}),(0,n.jsx)("dd",{class:"dd",markdown:"1",children:(0,n.jsxs)(s.p,{children:["The path to the backup or restore directory. Used with the ",(0,n.jsx)(s.code,{children:"teamforge backup"})," and ",(0,n.jsx)(s.code,{children:"teamforge restore"})," commands."]})})]}),"\n",(0,n.jsx)(s.h2,{id:"commands",children:"Commands"}),"\n",(0,n.jsxs)(s.p,{children:["The ",(0,n.jsx)(s.code,{children:"teamforge"})," script can perform the following actions:"]}),"\n",(0,n.jsxs)("dl",{children:[(0,n.jsx)("dt",{markdown:"1",children:(0,n.jsx)(s.p,{children:"status"})}),(0,n.jsx)("dd",{markdown:"1",children:(0,n.jsxs)(s.p,{children:["Show status of all services. Use the ",(0,n.jsx)(s.code,{children:"-s"})," parameter to know the status of a specific service."]})}),(0,n.jsx)("dt",{markdown:"1",children:(0,n.jsx)(s.p,{children:"bootstrap"})}),(0,n.jsx)("dd",{markdown:"1",children:(0,n.jsxs)(s.p,{children:["Bootstrap data (re-create data structures). Use the ",(0,n.jsx)(s.code,{children:"-s"})," parameter to selectively bootstrap a specific component. Suppose, you did not have SVN on your TeamForge site and if you add SVN while upgrading to TeamForge 16.10 or later. You can now selectively bootstrap SVN alone."]})}),(0,n.jsx)("dt",{markdown:"1",children:(0,n.jsx)(s.p,{children:"deploy"})}),(0,n.jsx)("dd",{markdown:"1",children:(0,n.jsx)(s.p,{children:"Deploy service(s)."})}),(0,n.jsx)("dt",{markdown:"1",children:(0,n.jsx)(s.p,{children:"migrate"})}),(0,n.jsx)("dd",{markdown:"1",children:(0,n.jsx)(s.p,{children:"Migrate data to latest schema."})}),(0,n.jsx)("dt",{markdown:"1",children:(0,n.jsx)(s.p,{children:"provision"})}),(0,n.jsx)("dd",{markdown:"1",children:(0,n.jsxs)(s.p,{children:["Provision/reprovision the server. The ",(0,n.jsx)(s.code,{children:"provision"})," command performs tasks such as creating the runtime, starting and stopping services, bootstrapping (fresh install) or migrating (upgrade) data, deploying services, setting file permissions, setting SELinux permissions, initializing services and so on."]})}),(0,n.jsx)("dt",{markdown:"1",children:(0,n.jsx)(s.p,{children:"undeploy"})}),(0,n.jsx)("dd",{markdown:"1",children:(0,n.jsx)(s.p,{children:"Undeploy service(s)."})}),(0,n.jsx)("dt",{markdown:"1",children:(0,n.jsx)(s.p,{children:"start"})}),(0,n.jsx)("dd",{markdown:"1",children:(0,n.jsx)(s.p,{children:"Start service(s)."})}),(0,n.jsx)("dt",{markdown:"1",children:(0,n.jsx)(s.p,{children:"stop"})}),(0,n.jsx)("dd",{markdown:"1",children:(0,n.jsx)(s.p,{children:"Stop service(s)."})}),(0,n.jsx)("dt",{markdown:"1",children:(0,n.jsx)(s.p,{children:"kill"})}),(0,n.jsx)("dd",{markdown:"1",children:(0,n.jsx)(s.p,{children:"Terminates service(s) forcefully."})}),(0,n.jsx)("dt",{markdown:"1",children:(0,n.jsx)(s.p,{children:"verify"})}),(0,n.jsx)("dd",{markdown:"1",children:(0,n.jsx)(s.p,{children:"Verify environment."})}),(0,n.jsx)("dt",{markdown:"1",children:(0,n.jsx)(s.p,{children:"show-endpoints"})}),(0,n.jsx)("dd",{markdown:"1",children:(0,n.jsx)(s.p,{children:"Show endpoints"})}),(0,n.jsx)("dt",{markdown:"1",children:(0,n.jsx)(s.p,{children:"show-dependencies"})}),(0,n.jsx)("dd",{markdown:"1",children:(0,n.jsx)(s.p,{children:"Show deployment dependencies"})}),(0,n.jsx)("dt",{markdown:"1",children:(0,n.jsx)(s.p,{children:"reinitialize"})}),(0,n.jsx)("dd",{markdown:"1",children:(0,n.jsx)(s.p,{children:"Reinitializes all the TeamForge services"})}),(0,n.jsx)("dt",{markdown:"1",children:(0,n.jsx)(s.p,{children:"apply-permissions"})}),(0,n.jsx)("dd",{markdown:"1",children:(0,n.jsx)(s.p,{children:"Applies the TeamForge file system permissions when you restore the TeamForge data in a new server while upgraing to a latest TeamForge version."})}),(0,n.jsx)("dt",{markdown:"1",children:(0,n.jsx)(s.p,{children:"snapshot"})}),(0,n.jsx)("dd",{markdown:"1",children:(0,n.jsx)(s.p,{children:"Dumps relevant diagnostic information to the console (stdout) for each deployed service."})}),(0,n.jsx)("dt",{markdown:"1",children:(0,n.jsx)(s.p,{children:"info"})}),(0,n.jsx)("dd",{markdown:"1",children:(0,n.jsx)(s.p,{children:"Displays a summary of TeamForge configuration."})}),(0,n.jsx)("dt",{markdown:"1",children:(0,n.jsx)(s.p,{children:"check-data-integrity"})}),(0,n.jsx)("dd",{markdown:"1",children:(0,n.jsx)(s.p,{children:"Verifies the integrity of the data defined in the service manifest."})}),(0,n.jsx)("dt",{markdown:"1",children:(0,n.jsx)(s.p,{children:"update-data-integrity"})}),(0,n.jsx)("dd",{markdown:"1",children:(0,n.jsx)(s.p,{children:"Updates the calculated checksums for the data defined in the manifest."})}),(0,n.jsx)("dt",{markdown:"1",children:(0,n.jsx)(s.p,{children:"await-dependencies"})}),(0,n.jsx)("dd",{markdown:"1",children:(0,n.jsx)(s.p,{children:"Waits for dependencies to become available."})}),(0,n.jsx)("dt",{markdown:"1",children:(0,n.jsx)(s.p,{children:"apply-selinux"})}),(0,n.jsx)("dd",{markdown:"1",children:(0,n.jsx)(s.p,{children:"Applies selinux policies."})}),(0,n.jsx)("dt",{markdown:"1",children:(0,n.jsx)(s.p,{children:"unload-selinux"})}),(0,n.jsx)("dd",{markdown:"1",children:(0,n.jsx)(s.p,{children:"Unloads selinux policies."})}),(0,n.jsx)("dt",{markdown:"1",children:(0,n.jsx)(s.p,{children:"logs"})}),(0,n.jsx)("dd",{markdown:"1",children:(0,n.jsx)(s.p,{children:"Tails log files."})}),(0,n.jsx)("dt",{markdown:"1",children:(0,n.jsx)(s.p,{children:"backup"})}),(0,n.jsx)("dd",{markdown:"1",children:(0,n.jsxs)(s.p,{children:["Back up TeamForge data. The ",(0,n.jsx)(s.strong,{children:"-p"})," parameter is mandatory. For more information, see ",(0,n.jsx)(s.a,{href:"../scripts/teamforgescript.html#teamforgebackup",children:"Back up and Restore TeamForge Data Using the teamforge.py Script"}),"."]})}),(0,n.jsx)("dt",{markdown:"1",children:(0,n.jsx)(s.p,{children:"restore"})}),(0,n.jsx)("dd",{markdown:"1",children:(0,n.jsxs)(s.p,{children:["Restore TeamForge data. The ",(0,n.jsx)(s.strong,{children:"-p"})," parameter is mandatory. For more information, see ",(0,n.jsx)(s.a,{href:"../scripts/teamforgescript.html#teamforgebackup",children:"Back up and Restore TeamForge Data Using the teamforge.py Script"}),"."]})})]}),"\n",(0,n.jsx)(s.h3,{id:"reload",children:"teamforge reload"}),"\n",(0,n.jsxs)(s.p,{children:["The ",(0,n.jsx)(s.code,{children:"teamforge reload"})," command comes in handy when you want to quickly bring up the site after modifying some of the frequently-used ",(0,n.jsx)(s.code,{children:"site-options.conf"})," tokens. Certain site-options.conf tokens, when modified, require stopping, deploying, restarting and initializing certain services. Instead of restarting the whole site, the ",(0,n.jsx)(s.code,{children:"teamforge reload"})," command, depending on the tokens that are modified, restarts only the services that need a restart, while keeping the site up for other services."]}),"\n",(0,n.jsxs)(s.p,{children:["The following table lists the tokens with which you can use the ",(0,n.jsx)(s.code,{children:"teamforge reload"})," command and the services that are restarted when you change those tokens."]}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"When you modify these tokens..."}),(0,n.jsxs)(s.th,{children:["This is what ",(0,n.jsx)(s.code,{children:"teamforge reload"})," does..."]})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"PGSQL_SHARED_BUFFERS="}),(0,n.jsx)("br",{})," ",(0,n.jsx)(s.code,{children:"PGSQL_WORK_MEM="}),(0,n.jsx)("br",{})," ",(0,n.jsx)(s.code,{children:"PGSQL_FSYNC="}),(0,n.jsx)("br",{})," ",(0,n.jsx)(s.code,{children:"PGSQL_COMMIT_DELAY="}),(0,n.jsx)("br",{})," ",(0,n.jsx)(s.code,{children:"PGSQL_COMMIT_SIBLINGS="}),(0,n.jsx)("br",{})," ",(0,n.jsx)(s.code,{children:"PGSQL_EFFECTIVE_CACHE_SIZE="}),(0,n.jsx)("br",{})," ",(0,n.jsx)(s.code,{children:"PGSQL_RANDOM_PAGE_COST="}),(0,n.jsx)("br",{})," ",(0,n.jsx)(s.code,{children:"PGSQL_MAINTENANCE_WORK_MEM="}),(0,n.jsx)("br",{}),(0,n.jsx)(s.code,{children:"PGSQL_LOG_MIN_DURATION="}),(0,n.jsx)("br",{})]}),(0,n.jsxs)(s.td,{children:["1. Stop PostgreSQL.",(0,n.jsx)("br",{})," 2. Deploy PostgreSQL.",(0,n.jsx)("br",{})," 3. Start PostgreSQL."]})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"JAMES_GATEWAY_HOST="}),(0,n.jsx)("br",{})," ",(0,n.jsx)(s.code,{children:"JAMES_GATEWAY_PORT="}),(0,n.jsx)("br",{})," ",(0,n.jsx)(s.code,{children:"PHOENIX_JAVA_OPTS="}),(0,n.jsx)("br",{})]}),(0,n.jsxs)(s.td,{children:["1. Stop Phoenix.",(0,n.jsx)("br",{})," 2. Deploy Mail.",(0,n.jsx)("br",{})," 3. Start Phoenix.",(0,n.jsx)("br",{})," 4. Initialize Mail."]})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"ETL_JOB_TRIGGER_TIME"}),"=",(0,n.jsx)("br",{})," ",(0,n.jsx)(s.code,{children:"ETL_JAVA_OPTS"}),"=",(0,n.jsx)("br",{})]}),(0,n.jsxs)(s.td,{children:["1. Stop ETL.",(0,n.jsx)("br",{})," 2. Deploy ETL.",(0,n.jsx)("br",{})," 3. Start ETL.",(0,n.jsx)("br",{})," 4. Initialize ETL."]})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"ENABLE_SERVICE_MONITORING="}),(0,n.jsx)("br",{})," ",(0,n.jsx)(s.code,{children:"SERVICE_MONITOR_RETRIES="}),(0,n.jsx)("br",{})," ",(0,n.jsx)(s.code,{children:"MONIT_CHECK_INTERVAL="}),(0,n.jsx)("br",{})]}),(0,n.jsxs)(s.td,{children:["1. Stop Monit (service-monitor).",(0,n.jsx)("br",{})," 2. Deploy Monit (service-monitor).",(0,n.jsx)("br",{})," 3. Start Monit (service-monitor)."]})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"SESSION_TIMEOUT="}),(0,n.jsx)("br",{})," ",(0,n.jsx)(s.code,{children:"JBOSS_JAVA_OPTS="}),(0,n.jsx)("br",{})," ",(0,n.jsx)(s.code,{children:"MAX_WWW_CLIENTS="}),(0,n.jsx)("br",{})," ",(0,n.jsx)(s.code,{children:"USER_RESOURCE_CACHE_MAX_SIZE_LIMIT="}),(0,n.jsx)("br",{})," ",(0,n.jsx)(s.code,{children:"ADHOC_QUERY_RESULTS_LIMT="}),(0,n.jsx)("br",{})," ",(0,n.jsx)(s.code,{children:"ADHOC_QUERY_CONNECTION_TIMEOUT="}),(0,n.jsx)("br",{})," ",(0,n.jsx)(s.code,{children:"PASSWORD_EXPIRY_PERIOD="}),(0,n.jsx)("br",{})," ",(0,n.jsx)(s.code,{children:"PASSWORD_DISABLE_PERIOD="}),(0,n.jsx)("br",{})," ",(0,n.jsx)(s.code,{children:"PASSWORD_WARNING_PERIOD="}),(0,n.jsx)("br",{})," ",(0,n.jsx)(s.code,{children:"PASSWORD_DELETE_PERIOD="}),(0,n.jsx)("br",{})," ",(0,n.jsx)(s.code,{children:"PASSWORD_CONTROL_EFFECTIVE_DATE="}),(0,n.jsx)("br",{})]}),(0,n.jsxs)(s.td,{children:["1. Stop Jboss.",(0,n.jsx)("br",{})," 2. Deploy Jboss and ctfcore-app.",(0,n.jsx)("br",{})," 3. Start Jboss.",(0,n.jsx)("br",{})," 4. Initialize the ctfcore-app service."]})]})]})]}),"\n",(0,n.jsx)(s.h2,{id:"teamforgebackup",children:"Back up and Restore TeamForge Data Using the teamforge.py Script"}),"\n",(0,n.jsxs)(s.p,{children:["Use the ",(0,n.jsx)(s.code,{children:"teamforge.py"})," script's ",(0,n.jsx)(s.code,{children:"backup"})," and ",(0,n.jsx)(s.code,{children:"restore"})," commands to back up and restore TeamForge data."]}),"\n",(0,n.jsx)(s.h3,{id:"back-up-and-restore-teamforge",children:"Back up and Restore TeamForge"}),"\n",(0,n.jsxs)(s.p,{children:["If you are upgrading to a latest TeamForge version, it is still recommended to follow the [usual backup and restore procedure][backupandrestore]. Use the ",(0,n.jsx)(s.code,{children:"teamforge.py"})," script's ",(0,n.jsx)(s.code,{children:"backup"})," and ",(0,n.jsx)(s.code,{children:"restore"})," commands if you want to back up a particular service such as SVN and restore it on a new server (when you intend to move a specific service from one server to another, typically to move the service to a dedicated server of its own)."]}),"\n",(0,n.jsxs)(s.p,{children:["If you are backing up TeamForge as a whole, you must stop all the TeamForge services but PostgreSQL before running the ",(0,n.jsx)(s.code,{children:"teamforge backup"}),"  and ",(0,n.jsx)(s.code,{children:"teamforge restore"})," commands."]}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsxs)(s.li,{children:["To back up TeamForge data:","\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-shell",children:"teamforge stop\r\nteamforge start -s postgres\r\nteamforge backup -p \\<path to the directory where the data is backed up\\>\n"})}),"\n"]}),"\n",(0,n.jsx)(s.li,{children:"Compress the backed up data and copy it to the target server where you want to restore the data."}),"\n",(0,n.jsxs)(s.li,{children:["To restore TeamForge data:","\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-shell",children:"teamforge stop\r\nteamforge start -s postgres\r\nteamforge restore -p \\<path to the directory where you have the data to be restored\\>\n"})}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsx)(t.Ay,{}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"back-up-and-restore-a-specific-service",children:"Back up and Restore a Specific Service"}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsxs)(s.li,{children:["To back up a specific service (such as SVN):","\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-shell",children:"teamforge backup -s \\<serviceName\\> -p \\<path to the directory where the data is backed up\\>\n"})}),"\n","For example:","\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-shell",children:"teamforge backup -s svn -p /tmp/svnbackup\n"})}),"\n"]}),"\n",(0,n.jsx)(s.li,{children:"Compress the backed up data and copy it to the target server where you want to restore the data."}),"\n",(0,n.jsxs)(s.li,{children:["To restore a specific service's data:","\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-shell",children:"teamforge restore -s \\<serviceName\\> -p \\<path to the directory where you have the data to be restored\\>\n"})}),"\n","For example:","\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-shell",children:"teamforge restore -s svn -p /tmp/svnbackup\n"})}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsx)(t.Ay,{}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"did-you-back-up-symlinked-directories",children:"Did You Back up symlinked Directories?"}),"\n",(0,n.jsx)(s.p,{children:"Do this if and only if you had backed up and restored symlinked directories."}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:["Move the ",(0,n.jsx)(s.code,{children:"svnroot"}),", ",(0,n.jsx)(s.code,{children:"cvsroot"})," and ",(0,n.jsx)(s.code,{children:"sf-svnroot"})," directories from ",(0,n.jsx)(s.code,{children:"/opt/collabnet/teamforge/var/scm"})," to the root directory."]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-shell",children:"cd /opt/collabnet/teamforge/var/scm\r\nmv svnroot cvsroot sf-svnroot /\n"})}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsx)(s.p,{children:"Create symlinks to the root directory."}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-shell",children:"ln -s /sf-svnroot .\r\nln -s /svnroot .\r\nln -s /cvsroot .\n"})}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsx)(s.p,{children:"Provision TeamForge."}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-shell",children:"teamforge provision -y\n"})}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsx)(s.p,{children:"Apply the TeamForge file system permissions."}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-shell",children:"teamforge apply-permissions\n"})}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"logging",children:"Logging"}),"\n",(0,n.jsxs)(s.p,{children:["The ",(0,n.jsx)(s.code,{children:"teamforge"})," script writes entries to ",(0,n.jsx)(s.code,{children:"/opt/collabnet/teamforge/log/runtime/runtime.log"})," file."]})]})}function p(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},75905:(e,s,r)=>{r.d(s,{A:()=>n});const n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowMTgwMTE3NDA3MjA2ODExQTk2MURCMzQ1QTg3OTcyOSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozQ0IzQzI5Qjg2NTYxMUUxQjU1NkZCQ0RDQTk1MEE3NCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozQ0IzQzI5QTg2NTYxMUUxQjU1NkZCQ0RDQTk1MEE3NCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDQzBDNjg4MTkyMDY4MTE4REJCODA3RUZEMkZCNzcxIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjAxODAxMTc0MDcyMDY4MTFBOTYxREIzNDVBODc5NzI5Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+gwrFywAAAehJREFUeNpi/P//PwMtABMDjcDQM5gFXYCRkZEU/cxPnz5LBjGkpaXmAqm/OA0mxdAbN25mTn+yeDKIA2SzaWioT4cZzkSJoQvfrJ+89f5+BhC+9P/W5JUrV2qDPE2uwWBD5z5bN3nj7f0MP7//Z3AVd2D4fur9pPDw8DeEDGa6evWq+b1nDw8DXSEOUwwzdOaDdZPX3dgHNPQfg4e0A4PcVZ758fFxy4Hy34D4Py6DmY4ePWZ57PO13T7r8myEtGX2L1q0GGQ4C8jQKbfXTl5zbS/Drx//GbzkHRmUbvHOz8nJmQOUvwPEn2EGM6LnPGCq4Dx/88rmkK2Vzp9+fmXgY+NmKDGNuWEnrLNy8q0N9Wtv7AWrC9F0ZtB+wg8z9BYQv0dOFdgM5rW0tDQv622Yn39ossynH1/A4hayugwnHl8Gs8N0XBj0XgjgNBSXwexASkZbW9uiaWZvZ/beidIff3yFy0fouTAYvxXCaygYgAxGxtCI4gRiVS0trZjVh3c8Eary+M9cZPM/dnHj/ylTpswDylkBsQgoMnGmHSwGYxp+cPuTnBU9xBuKx2AUw3V0dCK6u3t6iDYURxijG84BNQxEvwPiD1jDlESDYYYzQ9P8X2IMJbYQAtn8h9R8zzhaNcEAQIABAPHG9uJTK4WgAAAAAElFTkSuQmCC"},43023:(e,s,r)=>{r.d(s,{R:()=>o,x:()=>d});var n=r(63696);const i={},t=n.createContext(i);function o(e){const s=n.useContext(t);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),n.createElement(t.Provider,{value:s},e.children)}}}]);