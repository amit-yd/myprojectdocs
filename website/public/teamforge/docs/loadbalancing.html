<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-23.1 docs-doc-page docs-doc-id-loadbalancing" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">TeamForge Load Balancing Setup · Digital.ai TeamForge</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:url" content="https://staging.docs.digital.ai/docs/loadbalancing"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:product" content="teamforge"><meta data-rh="true" property="og:image" content="https://digital.ai/wp-content/uploads/2022/09/HP-BN-GEN-2022-12-platform-image-2048x367.png"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:image" content="https://digital.ai/wp-content/uploads/2022/09/HP-BN-GEN-2022-12-platform-image-2048x367.png"><meta data-rh="true" name="twitter:site" content="@digitaldotai"><meta data-rh="true" name="docusaurus_version" content="23.1"><meta data-rh="true" name="docusaurus_tag" content="docs-default-23.1"><meta data-rh="true" name="docsearch:version" content="23.1"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-23.1"><meta data-rh="true" property="og:title" content="TeamForge Load Balancing Setup · Digital.ai TeamForge"><meta data-rh="true" name="description" content="Installing TeamForge in a Load Balancing setup ensures distribution of processing load between multiple servers. The HAProxy Server hosts the HAProxy services that are required for the load balancing function."><meta data-rh="true" property="og:description" content="Installing TeamForge in a Load Balancing setup ensures distribution of processing load between multiple servers. The HAProxy Server hosts the HAProxy services that are required for the load balancing function."><meta data-rh="true" name="keywords" content="HAProxy,load balancing"><link data-rh="true" rel="icon" href="/brand/digitalai/Favicon-FC-.svg"><link data-rh="true" rel="canonical" href="https://staging.docs.digital.ai/docs/loadbalancing"><link data-rh="true" rel="alternate" href="https://staging.docs.digital.ai/docs/loadbalancing" hreflang="en"><link data-rh="true" rel="alternate" href="https://staging.docs.digital.ai/docs/loadbalancing" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://FO8TEHAYUG-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Digital.ai TeamForge" href="/opensearch.xml">
<link rel="icon" href="/img/pwa/manifest-icon-512.png">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#20232a">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#20232a">
<link rel="apple-touch-icon" href="/img/pwa/manifest-icon-512.png">
<link rel="mask-icon" href="/img/pwa/manifest-icon-512.png" color="#06bcee">
<meta name="msapplication-TileImage" href="/img/pwa/manifest-icon-512.png">
<meta name="msapplication-TileColor" content="#20232a"><link rel="stylesheet" href="/assets/css/styles.63a3b17c.css">
<script src="/assets/js/runtime~main.91bc3f71.js" defer="defer"></script>
<script src="/assets/js/main.c161a5c6.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_oPtH" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_zJRd" style="background-color:#20232a;color:#fff" role="banner"><div class="announcementBarPlaceholder_NpUd"></div><div class="content_bSb_ announcementBarContent_t7IR"><a target="_blank" href="https://devopsai-my.sharepoint.com/:p:/g/personal/rjanarthanan_digital_ai/EZCAc8-0hCtCiVXAE9ZIiF8BgNF1foc76rbOOmME_DCMYQ?e=9ev1lb">Project Phoenix</a></div><button type="button" aria-label="Close" class="clean-btn close closeButton_J5rP announcementBarClose_Jjdj"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/"><div class="navbar__logo"><img src="/brand/digitalai/Digital_ai-FC-RGB.svg" alt="digital.ai" class="themedComponent_siVc themedComponent--light_hHel"><img src="/brand/digitalai/Digital_ai-FC-Reverse-RGB.svg" alt="digital.ai" class="themedComponent_siVc themedComponent--dark_yETr"></div></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link" href="/docs/loadbalancing">Product</a><ul class="dropdown__menu"><li><a class="dropdown__link" target="_self" href="/../platform">Platform</a></li><li><a class="dropdown__link" target="_self" href="/../agility">Agility</a></li><li><a class="dropdown__link" target="_self" href="/../deploy">Deploy</a></li><li><a class="dropdown__link" target="_self" href="/../release">Release</a></li><li><a class="dropdown__link" target="_self" href="/../appmanagement">App Management</a></li><li><a class="dropdown__link" target="_self" href="/../intelligence">Intelligence</a></li><li><a class="dropdown__link" target="_self" href="/../continuostesting">Continuous Testing</a></li><li><a class="dropdown__link" target="_self" href="/../appsecurity">App Security</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/teamforge-overview">23.1</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/loadbalancing">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/loadbalancing">23.1</a></li></ul></div><a href="https://digitalai.us.digital.ai/signin/docs?redirect=https%3A%2F%2Fdocs.digital.ai%2F" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Login<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_ki11 colorModeToggle_Hewu"><button class="clean-btn toggleButton_MMFG toggleButtonDisabled_Uw7m" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_lgto"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_U96C"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_bzqh"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_MB5r"><div class="docsWrapper__sE8"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_iEvu" type="button"></button><div class="docRoot_DfVB"><aside class="theme-doc-sidebar-container docSidebarContainer_c7NB"><div class="sidebarViewport_KYo0"><div class="sidebar_CUen"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_jmj1 menuWithAnnouncementBar_YufC"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/teamforge-overview">TeamForge 23.1</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/teamforge-overview">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/release-notes/teamforge-new">Release Notes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/installpages/allinoneserver_rhel_centos">Plan Install / Upgrade</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/installpages/allinoneserver_rhel_centos">Single Server Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/installpages/distributed_install_rhel_centos">Multi-host Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/installpages/install_teamforge_with_oracle">TeamForge with Oracle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/installpages/dbdm-on-nonctfmanaged-postgresserver">TeamForge with External PostgreSQL Server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/loadbalancing">TeamForge Load Balancing Setup</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/gitoverview">Git Integration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/internalcodebrowser">Source Code</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/identityinfo">External Authentication</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/scripts/backup-rb-data-py">Scripts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/BaselinePages/baseline-glossary">Glossary</a></div></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_oTwn"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_pMEX"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_a9sJ"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_Qr34"><div class="docItemContainer_tjFy"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_T5ub" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_sfvy"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">TeamForge 23.1</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Plan Install / Upgrade</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">TeamForge Load Balancing Setup</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 23.1</span><div class="tocCollapsible_wXna theme-doc-toc-mobile tocMobile_Ojys"><button type="button" class="clean-btn tocCollapsibleButton_iI2p">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>TeamForge Load Balancing Setup</h1></header><ul>
<li>In this setup, TeamForge services have been distributed across several servers to distribute the load across several servers.</li>
<li>The hardware/software requirements for running TeamForge in a load balancing setup remain the same as that of the usual setup. See [TeamForge Requirements][requirements].</li>
<li><a href="http://www.haproxy.org/" target="_blank" rel="noopener noreferrer">HAProxy</a> can be installed on a server with single core CPU and at least 1GB of RAM.</li>
<li><a href="https://mmonit.com/monit/" target="_blank" rel="noopener noreferrer">Monit</a> is required on all servers to monitor services such as HAProxy and TeamForge applications.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="haproxy">HAProxy<a class="hash-link" aria-label="Direct link to HAProxy" title="Direct link to HAProxy" href="/docs/loadbalancing#haproxy">​</a></h3>
<p>HAProxy is one of the efficient and reliable solutions that offers load balancing services. For more information, see <a href="http://www.haproxy.org/#docs" target="_blank" rel="noopener noreferrer">HAProxy Documentation</a>.</p>
<p>This setup uses the HAProxy server as the termination point for all requests to the TeamForge application and its related components. The HAProxy will be
configured to handle all requests to the backend servers.</p>
<p>The HAProxy Server is hereinafter referred to as <code>haproxy.company.domain.com</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id="domain-names">Domain Names<a class="hash-link" aria-label="Direct link to Domain Names" title="Direct link to Domain Names" href="/docs/loadbalancing#domain-names">​</a></h4>
<p>With this load balancing setup, there is no requirement to allocate additional user-facing domain names for the servers. Each service is described based on the FQDN of the server on which it runs. HAProxy will proxy the requests to the relevant back-end servers.</p>
<p>This HAProxy deployment model is implemented to support the scenario of federating services across multiple servers without impacting existing URLs to those services.</p>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id="configuring-haproxy">Configuring HAProxy<a class="hash-link" aria-label="Direct link to Configuring HAProxy" title="Direct link to Configuring HAProxy" href="/docs/loadbalancing#configuring-haproxy">​</a></h4>
<p>HAProxy can have its configuration generated automatically by TeamForge. CollabNet recommends deploying HAProxy as the load balancing / front-end proxy by configuring it as a TeamForge node.</p>
<p>In this setup:</p>
<ul>
<li>
<p>The TeamForge Application Server hosts the core TeamForge application service, <code>ctfcore</code>, and other services such as <code>service-monitor</code>, <code>cliserver</code>, <code>reviewboard-adapter</code>, <code>mail</code>, <code>search</code>, <code>etl</code>, <code>binary</code>, <code>reviewboard</code>, <code>reviewboard-database</code>, <code>binary-database</code>, <code>ctfcore-datamart</code>, <code>ctfcore-database</code>, <code>gerrit-database</code>, <code>webr</code> and <code>webr-database</code>.</p>
</li>
<li>
<p>The HAProxy Server hosts the HAProxy services.</p>
</li>
<li>
<p>Services such as <code>subversion</code>, <code>gerrit</code>, <code>codesearch</code> and <code>baseline</code> are hosted on separate servers.</p>
</li>
<li>
<p>Place the license file which you intend to use (<code>sflicense.txt</code>) in the <code>/opt/collabnet/teamforge/var/etc/</code> directory. This saves you from having to restart the servers when the license is applied at a later point in time.</p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#F8F8F2"><span class="token maybe-class-name">The</span><span class="token plain"> license must be applicable to both the servers </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> the cluster</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Unless self-signed certificates are acceptable, provide custom SSL certificates using the following TeamForge <code>site-options.conf</code> tokens:</p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#F8F8F2"><span class="token constant" style="color:rgb(189, 147, 249)">SSL_CERT_FILE</span><span class="token operator">=</span><span class="token operator">/</span><span class="token plain">etc</span><span class="token operator">/</span><span class="token plain">ssl</span><span class="token operator">/</span><span class="token plain">certs</span><span class="token operator">/</span><span class="token plain">server</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">crt</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token constant" style="color:rgb(189, 147, 249)">SSL_KEY_FILE</span><span class="token operator">=</span><span class="token operator">/</span><span class="token plain">etc</span><span class="token operator">/</span><span class="token plain">ssl</span><span class="token operator">/</span><span class="token plain">certs</span><span class="token operator">/</span><span class="token plain">server</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">key</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># </span><span class="token maybe-class-name">Optional</span><span class="token plain"> </span><span class="token operator">-</span><span class="token plain"> only needed </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> an intermediate cert is needed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># </span><span class="token constant" style="color:rgb(189, 147, 249)">SSL_CHAIN_FILE</span><span class="token operator">=</span><span class="token operator">/</span><span class="token plain">etc</span><span class="token operator">/</span><span class="token plain">ssl</span><span class="token operator">/</span><span class="token plain">certs</span><span class="token operator">/</span><span class="token plain">intermediate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">crt</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="service-monitor">Service Monitor<a class="hash-link" aria-label="Direct link to Service Monitor" title="Direct link to Service Monitor" href="/docs/loadbalancing#service-monitor">​</a></h3>
<p>TeamForge supports <a href="https://mmonit.com/monit/" target="_blank" rel="noopener noreferrer">Monit</a> for monitoring services and recovering failed services. Monit is installed on the TeamForge Application and HAProxy servers to monitor the health of services and restart the services when they fail.</p>
<p>Monit log file is located at <code>/opt/collabnet/teamforge/log/monit/monit.log</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="systemlandscape">System Landscape<a class="hash-link" aria-label="Direct link to System Landscape" title="Direct link to System Landscape" href="/docs/loadbalancing#systemlandscape">​</a></h3>
<p>The following TeamForge <code>site-options.conf</code> snippet illustrates the system landscape for this setup being discussed in this topic:</p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#F8F8F2"><span class="token plain">################################################################################################################</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#</span><span class="token maybe-class-name">HAProxy</span><span class="token plain"> cluster and </span><span class="token constant" style="color:rgb(189, 147, 249)">PUBLIC_FQDN</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">haproxy</span><span class="token operator">-</span><span class="token plain">cluster</span><span class="token operator">:</span><span class="token constant" style="color:rgb(189, 147, 249)">CLUSTER_SERVICES</span><span class="token operator">=</span><span class="token plain">haproxy</span><span class="token operator">-</span><span class="token plain">ctfcore service</span><span class="token operator">-</span><span class="token plain">monitor haproxy</span><span class="token operator">-</span><span class="token plain">stats haproxy</span><span class="token operator">-</span><span class="token plain">subversion haproxy</span><span class="token operator">-</span><span class="token plain">mail haproxy</span><span class="token operator">-</span><span class="token plain">gerrit haproxy</span><span class="token operator">-</span><span class="token plain">binary haproxy</span><span class="token operator">-</span><span class="token plain">reviewboard haproxy</span><span class="token operator">-</span><span class="token plain">webr</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">haproxy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">company</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">com</span><span class="token operator">:</span><span class="token constant" style="color:rgb(189, 147, 249)">CLUSTER</span><span class="token operator">=</span><span class="token plain">haproxy</span><span class="token operator">-</span><span class="token plain">cluster</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">haproxy</span><span class="token operator">-</span><span class="token plain">cluster</span><span class="token operator">:</span><span class="token constant" style="color:rgb(189, 147, 249)">PUBLIC_FQDN</span><span class="token operator">=</span><span class="token plain">hafqdn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">company</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">com</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">haproxy</span><span class="token operator">-</span><span class="token plain">cluster</span><span class="token operator">:</span><span class="token plain">haproxy</span><span class="token operator">-</span><span class="token plain">ctfcore</span><span class="token operator">:</span><span class="token constant" style="color:rgb(189, 147, 249)">BACKEND</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> ctfapp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">company</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">com</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">haproxy</span><span class="token operator">-</span><span class="token plain">cluster</span><span class="token operator">:</span><span class="token plain">haproxy</span><span class="token operator">-</span><span class="token plain">mail</span><span class="token operator">:</span><span class="token constant" style="color:rgb(189, 147, 249)">BACKEND</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> ctfapp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">company</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">com</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">haproxy</span><span class="token operator">-</span><span class="token plain">cluster</span><span class="token operator">:</span><span class="token plain">haproxy</span><span class="token operator">-</span><span class="token plain">binary</span><span class="token operator">:</span><span class="token constant" style="color:rgb(189, 147, 249)">BACKEND</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> ctfapp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">company</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">com</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span><span class="token plain"> haproxy</span><span class="token operator">-</span><span class="token plain">cluster</span><span class="token operator">:</span><span class="token plain">haproxy</span><span class="token operator">-</span><span class="token plain">cvs</span><span class="token operator">:</span><span class="token constant" style="color:rgb(189, 147, 249)">BACKEND</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> ctfapp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">company</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">com</span><span class="token plain"> </span><span class="token operator">--</span><span class="token operator">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">haproxy</span><span class="token operator">-</span><span class="token plain">cluster</span><span class="token operator">:</span><span class="token plain">haproxy</span><span class="token operator">-</span><span class="token plain">reviewboard</span><span class="token operator">:</span><span class="token constant" style="color:rgb(189, 147, 249)">BACKEND</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> ctfapp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">company</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">com</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">haproxy</span><span class="token operator">-</span><span class="token plain">cluster</span><span class="token operator">:</span><span class="token plain">haproxy</span><span class="token operator">-</span><span class="token plain">subversion</span><span class="token operator">:</span><span class="token constant" style="color:rgb(189, 147, 249)">BACK</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">END</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> svn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">company</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">com</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">haproxy</span><span class="token operator">-</span><span class="token plain">cluster</span><span class="token operator">:</span><span class="token plain">haproxy</span><span class="token operator">-</span><span class="token plain">gerrit</span><span class="token operator">:</span><span class="token constant" style="color:rgb(189, 147, 249)">BACKEND</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> gerrit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">company</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">com</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">haproxy</span><span class="token operator">-</span><span class="token plain">cluster</span><span class="token operator">:</span><span class="token plain">haproxy</span><span class="token operator">-</span><span class="token plain">webr</span><span class="token operator">:</span><span class="token constant" style="color:rgb(189, 147, 249)">BACKEND</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> ctfapp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">company</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">com</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">###############################################################################################################</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#ctfcore</span><span class="token operator">-</span><span class="token plain">cluster and </span><span class="token constant" style="color:rgb(189, 147, 249)">PUBLIC_FQDN</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ctfapp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">company</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">com</span><span class="token operator">:</span><span class="token constant" style="color:rgb(189, 147, 249)">SERVICES</span><span class="token operator">=</span><span class="token plain">ctfcore service</span><span class="token operator">-</span><span class="token plain">monitor cliserver reviewboard</span><span class="token operator">-</span><span class="token plain">adapter mail search etl binary reviewboard reviewboard</span><span class="token operator">-</span><span class="token plain">database binary</span><span class="token operator">-</span><span class="token plain">database ctfcore</span><span class="token operator">-</span><span class="token plain">datamart ctfcore</span><span class="token operator">-</span><span class="token plain">database gerrit</span><span class="token operator">-</span><span class="token plain">database webr webr</span><span class="token operator">-</span><span class="token plain">database</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ctfapp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">company</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">com</span><span class="token operator">:</span><span class="token constant" style="color:rgb(189, 147, 249)">PUBLIC_FQDN</span><span class="token operator">=</span><span class="token plain">hafqdn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">company</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">com</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ctfapp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">company</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">com</span><span class="token operator">:</span><span class="token plain">mail</span><span class="token operator">:</span><span class="token constant" style="color:rgb(189, 147, 249)">PUBLIC_FQDN</span><span class="token operator">=</span><span class="token plain">hafqdn</span><span class="token operator">-</span><span class="token plain">mail</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">company</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">com</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ctfapp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">company</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">com</span><span class="token operator">:</span><span class="token plain">binary</span><span class="token operator">:</span><span class="token constant" style="color:rgb(189, 147, 249)">PUBLIC_FQDN</span><span class="token operator">=</span><span class="token plain">hafqdn</span><span class="token operator">-</span><span class="token plain">binary</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">company</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">com</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ctfapp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">company</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">com</span><span class="token operator">:</span><span class="token plain">webr</span><span class="token operator">:</span><span class="token constant" style="color:rgb(189, 147, 249)">PUBLIC_FQDN</span><span class="token operator">=</span><span class="token plain">hafqdn</span><span class="token operator">-</span><span class="token plain">webr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">company</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">com</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">################################################################################################################</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#</span><span class="token maybe-class-name">Gerrit</span><span class="token plain"> </span><span class="token maybe-class-name">Box</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">gerrit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">company</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">com</span><span class="token operator">:</span><span class="token constant" style="color:rgb(189, 147, 249)">SERVICES</span><span class="token operator">=</span><span class="token plain">gerrit</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">gerrit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">company</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">com</span><span class="token operator">:</span><span class="token constant" style="color:rgb(189, 147, 249)">PUBLIC_FQDN</span><span class="token operator">=</span><span class="token plain">hafqdn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">company</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">com</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">gerrit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">company</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">com</span><span class="token operator">:</span><span class="token plain">gerrit</span><span class="token operator">:</span><span class="token constant" style="color:rgb(189, 147, 249)">PUBLIC_FQDN</span><span class="token operator">=</span><span class="token plain">hafqdn</span><span class="token operator">-</span><span class="token plain">gerrit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">company</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">com</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#</span><span class="token maybe-class-name">Subversion</span><span class="token plain"> </span><span class="token maybe-class-name">Box</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">svn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">company</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">com</span><span class="token operator">:</span><span class="token constant" style="color:rgb(189, 147, 249)">SERVICES</span><span class="token operator">=</span><span class="token plain">subversion</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">svn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">company</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">com</span><span class="token operator">:</span><span class="token constant" style="color:rgb(189, 147, 249)">PUBLIC_FQDN</span><span class="token operator">=</span><span class="token plain">haqatest</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">maa</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">collab</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">net</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">svn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">company</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">com</span><span class="token operator">:</span><span class="token plain">subversion</span><span class="token operator">:</span><span class="token constant" style="color:rgb(189, 147, 249)">PUBLIC_FQDN</span><span class="token operator">=</span><span class="token plain">hafqdn</span><span class="token operator">-</span><span class="token plain">subversion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">company</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">com</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token constant" style="color:rgb(189, 147, 249)">ENABLE_SERVICE_MONITORING</span><span class="token operator">=</span><span class="token boolean">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#others</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">codesearch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">company</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">com</span><span class="token operator">:</span><span class="token constant" style="color:rgb(189, 147, 249)">SERVICES</span><span class="token operator">=</span><span class="token plain">codesearch</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">baseline</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">company</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">com</span><span class="token operator">:</span><span class="token constant" style="color:rgb(189, 147, 249)">SERVICES</span><span class="token operator">=</span><span class="token plain">baseline baseline</span><span class="token operator">-</span><span class="token plain">database baseline</span><span class="token operator">-</span><span class="token plain">post</span><span class="token operator">-</span><span class="token plain">install</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">################################################################################################################</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Where:</p>
<table><thead><tr><th>Cluster/Server</th><th>Description</th><th>Hosted Services</th></tr></thead><tbody><tr><td><code>haproxy.company.domain.com</code></td><td>The HAProxy cluster</td><td><code>haproxy-ctfcore</code> <br> <code>service-monitor</code> <br> <code>haproxy-stats</code> <br> <code>haproxy-subversion</code> <br> <code>haproxy-mail</code> <br> <code>haproxy-gerrit</code> <br> <code>haproxy-binary</code> <br> <code>haproxy-reviewboard</code> <br> <code>haproxy-eventq</code> <br> <code>haproxy-webr</code></td></tr><tr><td><code>ctfapp.company.domain.com</code></td><td>The CTF Core cluster</td><td><code>ctfcore</code> <br> <code>service-monitor</code> <br> <code>cliserver</code> <br> <code>reviewboard-adapter</code> <br> <code>mail</code> <br> <code>search</code> <br> <code>etl</code> <br> <code>binary</code> <br> <code>reviewboard</code> <br> <code>reviewboard-database</code> <br> <code>binary-database</code> <br> <code>ctfcore-datamart</code> <br> <code>ctfcore-database</code> <br> <code>gerrit-database</code> <br> <code>webr</code> <br> <code>webr-database</code></td></tr><tr><td><code>svn.company.domain.com</code></td><td>The Subversion server</td><td><code>subversion</code></td></tr><tr><td><code>gerrit.company.domain.com</code></td><td>The Gerrit server</td><td><code>gerrit</code></td></tr><tr><td><code>codesearch.company.domain.com</code></td><td>The Codesearch server</td><td><code>codesearch</code></td></tr><tr><td><code>baseline.company.domain.com</code></td><td>The Baseline server</td><td><code>baseline</code> <br> <code>baseline-database</code> <br> <code>baseline-post-install</code></td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="install-teamforge-in-a-load-balancing-setup">Install TeamForge in a Load Balancing Setup<a class="hash-link" aria-label="Direct link to Install TeamForge in a Load Balancing Setup" title="Direct link to Install TeamForge in a Load Balancing Setup" href="/docs/loadbalancing#install-teamforge-in-a-load-balancing-setup">​</a></h2>
<p>For the distributed setup discussed earlier, the installation process has to be done in the following sequence:</p>
<ol>
<li>Set up the TeamForge Application Server, provision TeamForge and copy the site-options.conf file to all other servers.</li>
<li>Set up the HAProxy Server and provision TeamForge.</li>
<li>Set up the Baseline Server, provision TeamForge and copy the site-options.conf file to all other servers.</li>
<li>Provision the TeamForge Application and HAProxy servers again.</li>
<li>Set up the Subversion Server.</li>
<li>Set up the Gerr</li>
<li>it Server.</li>
<li>Set up the Codesearch Server.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="prepare-the-servers">Prepare the Servers<a class="hash-link" aria-label="Direct link to Prepare the Servers" title="Direct link to Prepare the Servers" href="/docs/loadbalancing#prepare-the-servers">​</a></h3>
<p>It is assumed that you have all the servers required for TeamForge Load Balancing installation prepped up with the required OS: RHEL/CentOS 7.9 or RHEL 8.8.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="set-up-the-teamforge-application-server">Set up the TeamForge Application Server<a class="hash-link" aria-label="Direct link to Set up the TeamForge Application Server" title="Direct link to Set up the TeamForge Application Server" href="/docs/loadbalancing#set-up-the-teamforge-application-server">​</a></h3>
<ol>
<li>Configure the TeamForge installation repository.</li>
</ol>
<button type="button" class="btn btn-primary btn-xs light-blue-bg" data-toggle="collapse" href="#beforeYouBegin" aria-expanded="false" aria-controls="beforeYouBegin">Configure the TeamForge installation repository</button>
<ol>
<li>
<p>Install the TeamForge application packages.</p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#F8F8F2"><span class="token plain">yum install teamforge</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Install the Baseline packages if you are installing TeamForge Baseline.</p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#F8F8F2"><span class="token plain">yum install teamforge</span><span class="token operator">-</span><span class="token plain">baseline</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Install Monit.</p>
<div class="theme-admonition theme-admonition-important admonition_WCGJ alert alert--info"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</div><div class="admonitionContent_pbrs"><p>If you haven&#x27;t already installed the latest version of the Monit application, download it <a href="https://dl.fedoraproject.org/pub/epel/7/x86_64/Packages/m/monit-5.30.0-1.el7.x86_64.rpm" target="_blank" rel="noopener noreferrer">here</a>.</p></div></div>
<ol>
<li>
<p>Download Monit for</p>
<ul>
<li>
<p>RHEL 8.x from the EPEL repository.</p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#F8F8F2"><span class="token plain">wget https</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token plain">dl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">fedoraproject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">org</span><span class="token operator">/</span><span class="token plain">pub</span><span class="token operator">/</span><span class="token plain">epel</span><span class="token operator">/</span><span class="token plain">epel</span><span class="token operator">-</span><span class="token plain">release</span><span class="token operator">-</span><span class="token plain">latest</span><span class="token operator">-</span><span class="token number">8</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">noarch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">rpm</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">rpm </span><span class="token operator">-</span><span class="token plain">ivh epel</span><span class="token operator">-</span><span class="token plain">release</span><span class="token operator">-</span><span class="token plain">latest</span><span class="token operator">-</span><span class="token number">8</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">noarch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">rpm</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>RHEL/CentOS 7.x from the EPEL repository.</p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#F8F8F2"><span class="token plain">wget https</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token plain">dl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">fedoraproject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">org</span><span class="token operator">/</span><span class="token plain">pub</span><span class="token operator">/</span><span class="token plain">epel</span><span class="token operator">/</span><span class="token plain">epel</span><span class="token operator">-</span><span class="token plain">release</span><span class="token operator">-</span><span class="token plain">latest</span><span class="token operator">-</span><span class="token number">7</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">noarch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">rpm</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">rpm </span><span class="token operator">-</span><span class="token plain">ivh epel</span><span class="token operator">-</span><span class="token plain">release</span><span class="token operator">-</span><span class="token plain">latest</span><span class="token operator">-</span><span class="token number">7</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">noarch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">rpm</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
</li>
<li>
<p>Install Monit.</p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#F8F8F2"><span class="token plain">yum install monit</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
</li>
<li>
<p>Modify the <code>/etc/hosts</code> entries and add the FQDNS, all pointing to the HAProxy server&#x27;s IP address.</p>
</li>
<li>
<p>Provision services.</p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#F8F8F2"><span class="token plain">teamforge provision</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="copy-the-site-optionsconf-file">Copy the <code>site-options.conf</code> File<a class="hash-link" aria-label="Direct link to copy-the-site-optionsconf-file" title="Direct link to copy-the-site-optionsconf-file" href="/docs/loadbalancing#copy-the-site-optionsconf-file">​</a></h3>
<p>Once you configure the <code>site-options.conf</code> file in the TeamForge Application Server, you can copy it to the <code>/opt/collabnet/teamforge/etc/</code> directory of all the servers.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="set-up-the-haproxy-server">Set up the HAProxy Server<a class="hash-link" aria-label="Direct link to Set up the HAProxy Server" title="Direct link to Set up the HAProxy Server" href="/docs/loadbalancing#set-up-the-haproxy-server">​</a></h3>
<ol>
<li>
<p>Configure the TeamForge installation repository.</p>
<button type="button" class="btn btn-primary btn-xs light-blue-bg" data-toggle="collapse" href="#beforeYouBegin" aria-expanded="false" aria-controls="beforeYouBegin">Configure the TeamForge installation repository</button>
</li>
<li>
<p>Install the TeamForge application packages.</p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#F8F8F2"><span class="token plain">yum install teamforge </span><span class="token constant" style="color:rgb(189, 147, 249)">CN</span><span class="token operator">-</span><span class="token plain">haproxy</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Install Monit.</p>
<div class="theme-admonition theme-admonition-important admonition_WCGJ alert alert--info"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</div><div class="admonitionContent_pbrs"><p>If you haven&#x27;t already installed the latest version of the Monit application, download it <a href="https://dl.fedoraproject.org/pub/epel/7/x86_64/Packages/m/monit-5.30.0-1.el7.x86_64.rpm" target="_blank" rel="noopener noreferrer">here</a>.</p></div></div>
<ol>
<li>
<p>Download Monit for</p>
<ul>
<li>
<p>RHEL 8.x from the EPEL repository.</p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#F8F8F2"><span class="token plain">wget https</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token plain">dl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">fedoraproject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">org</span><span class="token operator">/</span><span class="token plain">pub</span><span class="token operator">/</span><span class="token plain">epel</span><span class="token operator">/</span><span class="token plain">epel</span><span class="token operator">-</span><span class="token plain">release</span><span class="token operator">-</span><span class="token plain">latest</span><span class="token operator">-</span><span class="token number">8</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">noarch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">rpm</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">rpm </span><span class="token operator">-</span><span class="token plain">ivh epel</span><span class="token operator">-</span><span class="token plain">release</span><span class="token operator">-</span><span class="token plain">latest</span><span class="token operator">-</span><span class="token number">8</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">noarch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">rpm</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>RHEL/CentOS 7.x from the EPEL repository.</p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#F8F8F2"><span class="token plain">wget https</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token plain">dl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">fedoraproject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">org</span><span class="token operator">/</span><span class="token plain">pub</span><span class="token operator">/</span><span class="token plain">epel</span><span class="token operator">/</span><span class="token plain">epel</span><span class="token operator">-</span><span class="token plain">release</span><span class="token operator">-</span><span class="token plain">latest</span><span class="token operator">-</span><span class="token number">7</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">noarch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">rpm</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">rpm </span><span class="token operator">-</span><span class="token plain">ivh epel</span><span class="token operator">-</span><span class="token plain">release</span><span class="token operator">-</span><span class="token plain">latest</span><span class="token operator">-</span><span class="token number">7</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">noarch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">rpm</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
</li>
<li>
<p>Install Monit.</p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#F8F8F2"><span class="token plain">yum install monit</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
</li>
<li>
<p>Provision services.</p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#F8F8F2"><span class="token plain">teamforge provision</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="set-up-the-baseline-server">Set up the Baseline Server<a class="hash-link" aria-label="Direct link to Set up the Baseline Server" title="Direct link to Set up the Baseline Server" href="/docs/loadbalancing#set-up-the-baseline-server">​</a></h3>
<ol>
<li>
<p>Configure the TeamForge installation repository.</p>
<button type="button" class="btn btn-primary btn-xs light-blue-bg" data-toggle="collapse" href="#beforeYouBegin" aria-expanded="false" aria-controls="beforeYouBegin">Configure the TeamForge installation repository</button>
</li>
<li>
<p>Install the TeamForge Baseline application packages.</p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#F8F8F2"><span class="token plain">yum install teamforge</span><span class="token operator">-</span><span class="token plain">baseline </span><span class="token operator">-</span><span class="token plain">y</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Modify the <code>/etc/hosts</code> entries and add the FQDNS, all pointing to the HAProxy server&#x27;s IP address.</p>
</li>
<li>
<p>Provision services.</p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#F8F8F2"><span class="token plain">teamforge provision</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Copy the site-options.conf file from the Baseline Server to all other servers.</p>
</li>
<li>
<p>Provision the TeamForge Application and HAProxy servers again.</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="set-up-the-subversion-server">Set up the Subversion Server<a class="hash-link" aria-label="Direct link to Set up the Subversion Server" title="Direct link to Set up the Subversion Server" href="/docs/loadbalancing#set-up-the-subversion-server">​</a></h3>
<ol>
<li>
<p>Configure the TeamForge installation repository.</p>
<button type="button" class="btn btn-primary btn-xs light-blue-bg" data-toggle="collapse" href="#beforeYouBegin" aria-expanded="false" aria-controls="beforeYouBegin">Configure the TeamForge installation repository</button>
</li>
<li>
<p>Install the TeamForge application packages.</p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#F8F8F2"><span class="token plain">yum install teamforge</span><span class="token operator">-</span><span class="token plain">scm </span><span class="token operator">-</span><span class="token plain">y</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Modify the <code>/etc/hosts</code> entries and add the FQDNS, all pointing to the HAProxy server&#x27;s IP address.</p>
</li>
<li>
<p>Provision services.</p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#F8F8F2"><span class="token plain">teamforge provision</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="set-up-the-git-server">Set up the Git Server<a class="hash-link" aria-label="Direct link to Set up the Git Server" title="Direct link to Set up the Git Server" href="/docs/loadbalancing#set-up-the-git-server">​</a></h3>
<ol>
<li>
<p>Configure the TeamForge installation repository.</p>
<button type="button" class="btn btn-primary btn-xs light-blue-bg" data-toggle="collapse" href="#beforeYouBegin" aria-expanded="false" aria-controls="beforeYouBegin">Configure the TeamForge installation repository</button>
</li>
<li>
<p>Install the Git packages.</p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#F8F8F2"><span class="token plain">yum install teamforge</span><span class="token operator">-</span><span class="token plain">git </span><span class="token operator">-</span><span class="token plain">y</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Modify the <code>/etc/hosts</code> entries and add the FQDNS, all pointing to the HAProxy server&#x27;s IP address.</p>
</li>
<li>
<p>Provision services.</p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#F8F8F2"><span class="token plain">teamforge provision</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="set-up-the-codesearch-server">Set up the Codesearch Server<a class="hash-link" aria-label="Direct link to Set up the Codesearch Server" title="Direct link to Set up the Codesearch Server" href="/docs/loadbalancing#set-up-the-codesearch-server">​</a></h3>
<ol>
<li>
<p>Configure the TeamForge installation repository.</p>
<button type="button" class="btn btn-primary btn-xs light-blue-bg" data-toggle="collapse" href="#beforeYouBegin" aria-expanded="false" aria-controls="beforeYouBegin">Configure the TeamForge installation repository</button>
</li>
<li>
<p>Install the TeamForge Codesearch application packages.</p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#F8F8F2"><span class="token plain">yum install teamforge</span><span class="token operator">-</span><span class="token plain">codesearch </span><span class="token operator">-</span><span class="token plain">y</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Modify the <code>/etc/hosts</code> entries and add the FQDNS, all pointing to the HAProxy server&#x27;s IP address.</p>
</li>
<li>
<p>Provision services.</p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#F8F8F2"><span class="token plain">teamforge provision</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="troubleshooting">Troubleshooting<a class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting" href="/docs/loadbalancing#troubleshooting">​</a></h2>
<ul>
<li>
<p>What do I do if the HAProxy connections to https frontend reaches the maximum number of connections (which is 10000 by default)?</p>
<p>Increase the number to a higher value (like HAPROXY_MAX_CONNECTIONS=15000) in the <code>site-options.conf</code> on the HAProxy server and provision TeamForge again. This is to buy time to identify the root cause of the real problem.</p>
<p>Possible issue: Check the clients (like Gerrit, Jenkins, Nexus, etc) from the network and look out for the stale/long running connections (they may be appearing as incomplete requests) and fix/close those connections.</p>
</li>
<li>
<p>How do I enable keep alive in HAProxy?</p>
<p>Set <code>HAPROXY_HTTP_MODE_OPTION=http-keep-alive</code> in the <code>site-options.conf</code> in HAProxy server and provision TeamForge.</p>
</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_Ow0B padding--none margin-left--sm"><li class="tag_DFxh"><a class="tag_otG2 tagRegular_s0E1" href="/docs/tags/ctf-20-2">ctf_20.2</a></li><li class="tag_DFxh"><a class="tag_otG2 tagRegular_s0E1" href="/docs/tags/ctf-20-0">ctf_20.0</a></li><li class="tag_DFxh"><a class="tag_otG2 tagRegular_s0E1" href="/docs/tags/ctf-19-3">ctf_19.3</a></li><li class="tag_DFxh"><a class="tag_otG2 tagRegular_s0E1" href="/docs/tags/ctf-19-0">ctf_19.0</a></li><li class="tag_DFxh"><a class="tag_otG2 tagRegular_s0E1" href="/docs/tags/system-admin-tasks">system_admin_tasks</a></li><li class="tag_DFxh"><a class="tag_otG2 tagRegular_s0E1" href="/docs/tags/installation">installation</a></li><li class="tag_DFxh"><a class="tag_otG2 tagRegular_s0E1" href="/docs/tags/upgrade">upgrade</a></li></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"></div><div class="col lastUpdated_ydrU"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-07-15T11:28:32.000Z" itemprop="dateModified">Jul 15, 2024</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/installpages/dbdm-on-nonctfmanaged-postgresserver"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">TeamForge with External PostgreSQL Server</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/gitoverview"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Overview</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_XG6w thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/docs/loadbalancing#haproxy">HAProxy</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/loadbalancing#service-monitor">Service Monitor</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/loadbalancing#systemlandscape">System Landscape</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/loadbalancing#install-teamforge-in-a-load-balancing-setup">Install TeamForge in a Load Balancing Setup</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/loadbalancing#prepare-the-servers">Prepare the Servers</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/loadbalancing#set-up-the-teamforge-application-server">Set up the TeamForge Application Server</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/loadbalancing#copy-the-site-optionsconf-file">Copy the <code>site-options.conf</code> File</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/loadbalancing#set-up-the-haproxy-server">Set up the HAProxy Server</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/loadbalancing#set-up-the-baseline-server">Set up the Baseline Server</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/loadbalancing#set-up-the-subversion-server">Set up the Subversion Server</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/loadbalancing#set-up-the-git-server">Set up the Git Server</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/loadbalancing#set-up-the-codesearch-server">Set up the Codesearch Server</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/loadbalancing#troubleshooting">Troubleshooting</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Participate</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://community.digital.ai/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://digital.ai/catalyst-blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="mailto:docfeedback@digital.ai" target="_blank" rel="noopener noreferrer" class="footer__link-item">Send Feedback<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Find us</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/digitaldotai" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.facebook.com/digitalaisw" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/digitaldotai/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Linkedin<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UC6k61LnvJGuBpHqC0uuUQ-g" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Explore More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://digital.ai/privacy-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://digital.ai/digital-ai-terms-and-policies/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms and Conditions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://digital.ai/" rel="noopener noreferrer" class="footerLogoLink_tutC"><img src="/brand/digitalai/Digital_ai-FC-Reverse-RGB.svg" alt="digital.ai" class="footer__logo themedComponent_siVc themedComponent--light_hHel" width="240"><img src="/brand/digitalai/Digital_ai-FC-Reverse-RGB.svg" alt="digital.ai" class="footer__logo themedComponent_siVc themedComponent--dark_yETr" width="240"></a></div><div class="footer__copyright">Copyright © 2024 - DIGITAL.AI, ALL RIGHTS RESERVED</div></div></div></footer></div>
</body>
</html>